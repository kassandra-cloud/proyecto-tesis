{% load static %}
<!doctype html>
<html lang="es" class="h-100">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Proyecto de Tesis{% endblock %}</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  {# Font Awesome para el icono de ojo/ocultar #}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

  {# Opcional: tu CSS global #}
  {# <link rel="stylesheet" href="{% static 'css/main.css' %}"> #}
  
  <style>
    html, body { height: 100%; margin: 0; }
    /* El fondo lo maneja cada página (p.ej., login.html) */
  </style>
  
  {% block extra_css %}{% endblock %}
</head>
<body class="h-100 d-flex flex-column">
  <main class="w-100 flex-grow-1 d-flex align-items-center justify-content-center">
    {% block content %}{% endblock %}
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  {# Script genérico: activa cualquier botón .toggle-password #}
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const toggles = document.querySelectorAll('.toggle-password');
      toggles.forEach(function (btn) {
        // Si el botón declara data-target, usamos ese selector; si no, buscamos el input más cercano
        const targetSelector = btn.getAttribute('data-target');
        const input = targetSelector
          ? document.querySelector(targetSelector)
          : btn.closest('.position-relative, .input-group, form, body').querySelector('input[type="password"], input[type="text"][data-is-password]');
        if (!input) return;

        // Marca opcional para inputs de texto que son password visibles
        if (input.type === 'text') input.setAttribute('data-is-password', 'true');

        btn.addEventListener('click', function () {
          const icon = btn.querySelector('i');
          const isPassword = input.getAttribute('type') === 'password';
          input.setAttribute('type', isPassword ? 'text' : 'password');

          if (icon) {
            icon.classList.toggle('fa-eye', !isPassword);
            icon.classList.toggle('fa-eye-slash', isPassword);
          }
          btn.setAttribute('aria-label', isPassword ? 'Ocultar contraseña' : 'Mostrar contraseña');
          btn.setAttribute('title', isPassword ? 'Ocultar contraseña' : 'Mostrar contraseña');
        });
      });
    });
  </script>

  {% block extra_js %}{% endblock %}
</body>
</html>
